<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="SSMM_UI.MainWindow"
		xmlns:local="clr-namespace:SSMM_UI.ViewModel" 
		xmlns:Views="clr-namespace:SSMM_UI.Views"
        x:DataType="local:MainWindowViewModel"
        Title="SSMM_UI" Width="1920" Height="1080"
        Background="{DynamicResource BackgroundColor}">
	
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="250"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="250"/>
				<ColumnDefinition Width="*"/>
			</Grid.ColumnDefinitions>

			<!-- Left sidebar + menu -->
			<DockPanel Grid.Column="0">
				<Menu DockPanel.Dock="Top">
					<MenuItem Header="Settings" Command="{Binding OpenSetting}">
					</MenuItem>
				</Menu>
				<Views:LeftSideBarView x:Name="LeftSideBar" DataContext="{Binding LeftSideBarVM}"/>
			</DockPanel>
		</Grid>
		<!-- Main Content Area -->
		<TabControl Grid.Column="1" Background="Transparent" BorderThickness="0">
			<TabItem Header="Stream">
				<StackPanel>
					<Views:StreamControlView DataContext="{Binding StreamControlVM} "></Views:StreamControlView>
						<Views:LogView DataContext="{Binding LogVM}"></Views:LogView>
				</StackPanel>
			</TabItem>

			<TabItem Header="Stream Metadata">
				<ScrollViewer>
					<StackPanel Margin="15" Width="1000">
						<Border Classes="card">
							
							<DockPanel LastChildFill="True">
								
								<Views:SearchView DataContext="{Binding SearchVM}" DockPanel.Dock="Left" Width="400"/>
								
								<Border Width="10" DockPanel.Dock="Left" Background="Transparent"/>
								<StackPanel>
									
									<TextBlock Text="STREAM METADATA" Classes="secondary"/>
									<TextBlock Text="Title" FontWeight="SemiBold"/>
									<TextBox Text="{Binding TitleText}" FontSize="14" Padding="10"
											 BorderBrush="{DynamicResource BorderColor}" BorderThickness="1"
											 CornerRadius="4" Background="{DynamicResource CardColor}"
											 Foreground="{DynamicResource PrimaryTextColor}"/>
									<StackPanel>
										<TextBlock FontWeight="SemiBold">Category (Youtube)</TextBlock>
										<ComboBox x:Name="YoutubeCategoriesCombo"
												  ItemsSource="{Binding YoutubeVideoCategories}"
												  Width="250"
												  SelectedItem="{Binding CurrentMetadata.YouTubeCategory}"
												  Background="Transparent"
												  BorderThickness="0"
												  Padding="5">
											<ComboBox.Styles>
												<Style Selector="ComboBoxItem">
													<Setter Property="Margin" Value="0 0 5 0"/>
													<Setter Property="Padding" Value="5 3"/>
												</Style>
												<Style Selector="ComboBoxItem:selected">
													<Setter Property="Background">
														<Setter.Value>
															<SolidColorBrush Color="{DynamicResource BorderColor}" Opacity="0.3"/>
														</Setter.Value>
													</Setter>
												</Style>
											</ComboBox.Styles>
											<ComboBox.ItemTemplate>
												<DataTemplate>
													<StackPanel Margin="0 5">
														<TextBlock Text="{Binding Path=Snippet.Title}" FontWeight="SemiBold" FontSize="14"/>
													</StackPanel>
												</DataTemplate>
											</ComboBox.ItemTemplate>
										</ComboBox>
									</StackPanel>
									<Button Content="Upload Thumbnail" Classes="primary" Margin="0 10 0 0"
											Command="{Binding UploadThumbnailCommand}"/>
									<Border Width="300" Height="168" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1"
											CornerRadius="4" Background="{DynamicResource BorderColor}" Opacity="0.1">
										<Image Source="{Binding ThumbnailImage}" Stretch="Uniform" Margin="5"/>
									</Border>
									
									<Button Content="Update Metadata" Classes="primary" Margin="0 10 0 0"
											Command="{Binding UpdateMetadataCommand}"/>
									<TextBlock Text="{Binding MetadataStatus}" Foreground="{DynamicResource DangerColor}"
											   Margin="0 10 0 0" TextWrapping="Wrap"/>
								</StackPanel>
							</DockPanel>
						</Border>
					</StackPanel>
				</ScrollViewer>
			</TabItem>

			<TabItem Header="Social Media AutoPoster">
				<Views:SocialPosterView DataContext="{Binding SocialPosterVM}"></Views:SocialPosterView>
			</TabItem>
		</TabControl>
	</Grid>
</Window>

<!--<TabItem Header="#DEBUG">
				<StackPanel>
					<Button Click="ClearGoogleOAuthTokens">Clear Tokens</Button>
				</StackPanel>
			</TabItem>-->


