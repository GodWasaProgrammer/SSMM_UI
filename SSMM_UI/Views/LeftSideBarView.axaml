<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
			 xmlns:vlc="clr-namespace:LibVLCSharp.Avalonia;assembly=LibVLCSharp.Avalonia"
			xmlns:local="clr-namespace:SSMM_UI"
             x:Class="SSMM_UI.Views.LeftSideBarView"
			 xmlns:vm="clr-namespace:SSMM_UI.ViewModel"
			 xmlns:rtmp="clr-namespace:SSMM_UI.RTMP"
			 x:DataType="vm:LeftSideBarViewModel"
			 x:Name="Root">

	<!-- Left Sidebar -->
	<Border Grid.Column="0" Background="{DynamicResource CardColor}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="0 0 1 0">
		<ScrollViewer>
			<StackPanel Margin="15">

				<!-- Video Preview -->
				<Border Classes="card">
					<local:MyVideoView x:Name="RtmpIncoming" Width="220" Height="124" IsVisible="{Binding IsReceivingStream}"/>
				</Border>

				<!-- Services Section -->
				<Border Classes="card">
					<StackPanel>
						<TextBlock Text="STREAM SERVICES" Classes="secondary" Margin="0 0 0 5"/>
						<ListBox ItemsSource="{Binding RtmpServiceGroups}"
								 SelectedItem="{Binding SelectedRtmpService, Mode=TwoWay}"
								 Height="250" Width="220"
								 Background="Transparent"
								 BorderBrush="{DynamicResource BorderColor}">
							<ListBox.ItemTemplate>
								<DataTemplate x:DataType="rtmp:RtmpServiceGroup">
									<Button Command="{Binding DataContext.AddServiceCommand, ElementName=Root}"
											CommandParameter="{Binding}"
											Classes="listItemButton">
										<TextBlock Text="{Binding ServiceName}" Padding="5 3" FontSize="14"/>
									</Button>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>
					</StackPanel>
				</Border>
				<!-- Login Section -->
				<Border Classes="card">
					<StackPanel>
						<TextBlock Text="Logins" HorizontalAlignment="Center" Classes="secondary" Margin="0 0 0 5"/>
						<Button Content="Youtube" Classes="primary" HorizontalAlignment="Center"
								Command="{Binding LoginWithGoogleCommand}"/>
						<TextBlock Text="{Binding YoutubeLoginStatus}" Classes="secondary" Margin="0 10 0 0"/>
						<Button Content="Kick" Classes="primary" HorizontalAlignment="Center"
								Command="{Binding LoginWithKickCommand}"/>
						<TextBlock Text="{Binding KickLoginStatus}" Classes="secondary" Margin="0 10 0 0"/>
						<Button Content="Twitch" Classes="primary" HorizontalAlignment="Center"
								Command="{Binding LoginWithTwitchCommand}"/>
						<TextBlock Text="{Binding TwitchLoginStatus}" Classes="secondary" Margin="0 10 0 0"/>
					</StackPanel>
				</Border>

				<!-- Selected Services Section -->
				<Border Classes="card">
					<StackPanel>
						<TextBlock Text="SELECTED SERVICES" Classes="secondary" Margin="0 0 0 5"/>
						<Border BorderBrush="{DynamicResource BorderColor}" BorderThickness="1" CornerRadius="4" Margin="0 0 0 5" Padding="1">
							<ListBox SelectedItem="{Binding SelectedService, Mode=TwoWay}" ItemsSource="{Binding SelectedServicesToStream}" Height="250" Background="Transparent" BorderThickness="0" Padding="5">
								<ListBox.ItemTemplate>
									<DataTemplate>
										<StackPanel Margin="0 5">

											<TextBlock Text="{Binding DisplayName}" />

										</StackPanel>
									</DataTemplate>
								</ListBox.ItemTemplate>
							</ListBox>
						</Border>
					</StackPanel>
				</Border>

				<Button Content="Remove Selected" Width="180" HorizontalAlignment="Center" Classes="danger" Margin="0 5 0 0"
						Command="{Binding RemoveSelectedServiceCommand}"/>
			</StackPanel>
		</ScrollViewer>
	</Border>
</UserControl>
